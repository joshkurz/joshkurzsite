{{ define "title" }}{{ .Site.Title }}{{ end }}
{{ define "main" }}
<header class="blog-header">
  <h1 class="blog-title">{{ .Site.Title }}</h1>
  {{ with .Content }}
  <div class="blog-intro">{{ . }}</div>
  {{ end }}
</header>
<section class="blog-list">
  {{ $pages := .Pages }}
  {{ if .IsHome }}
    {{ $pages = where .Site.RegularPages "Section" "posts" }}
    {{ $pages = sort $pages "Date" "desc" }}
  {{ else if .IsSection }}
    {{ $pages = sort .RegularPages "Date" "desc" }}
  {{ else if eq .Kind "taxonomyTerm" }}
    {{ $pages = sort .Pages "Title" }}
  {{ else if eq .Kind "taxonomy" }}
    {{ $pages = sort .Pages "Date" "desc" }}
  {{ end }}
  {{ range $pages }}
  <article class="blog-card">
    <h2 class="blog-card-title"><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
    {{ with .Params.description }}
    <p class="blog-card-description">{{ . }}</p>
    {{ end }}
    <p class="blog-card-date">{{ .Date.Format "January 2, 2006" }}</p>
  </article>
  {{ else }}
  <p class="blog-empty">There are no posts yet. Check back soon!</p>
  {{ end }}
</section>
{{ end }}
